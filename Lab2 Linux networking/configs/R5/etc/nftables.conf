#!/usr/sbin/nft -f
# This file is generated from information provided by doConfig.sh

flush ruleset

# ----- IPv4 -----
table ip filter {
	chain input {
		type filter hook input priority 0; policy accept;
	}

	chain forward {
		type filter hook forward priority 0; policy drop;
        ip saddr 192.168.1.0/24 ip daddr 172.16.0.0/24 accept comment "accept everything from 192.168.1.0/24 to 172.16.0.0/24"
        ip saddr 172.16.0.0/24 ip daddr 192.168.1.0/24 tcp dport 8080 accept comment "accept from 172.16.0.0/24 to 172.16.0.0/24:8080"
        ip protocol icmp drop comment "drop all ICMP types"
	}

	chain output {
		type filter hook output priority 0; policy accept;
	}
}